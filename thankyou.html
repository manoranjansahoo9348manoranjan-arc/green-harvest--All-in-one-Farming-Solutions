<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Thank You - Green Harvest</title>
  <link rel="icon" type="image" href="logo1.png">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-green-50 text-center min-h-screen flex flex-col justify-center items-center p-6">

  <h1 class="text-4xl font-bold text-green-700 mb-4">ðŸŽ‰ Thank You for Your Order!</h1>
  <p class="text-lg mb-2">Here is your order summary:</p>

  <p class="text-center text-green-700 font-semibold mt-2">
    Your order has been placed and added to the Orders section!
  </p>

  <div id="summary" class="bg-white p-6 rounded-lg shadow-lg max-w-md w-full text-left mt-4"></div>

  <div class="mt-6 flex space-x-4">
    <a href="service.html" class="bg-green-600 text-white px-6 py-3 rounded hover:bg-green-700">Back to Home</a>
    <a href="orders.html" class="bg-blue-600 text-white px-6 py-3 rounded hover:bg-blue-700">View Orders</a>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const data = JSON.parse(localStorage.getItem("orderSummary"));
      const container = document.getElementById("summary");

      if (data) {
        const itemsHTML = data.cart.map(item =>
          `<li>${item.name} Ã— ${item.quantity}</li>`
        ).join("");

        container.innerHTML = `
          <p><strong>Name:</strong> ${data.name}</p>
          
          <p><strong>Total Paid:</strong> ${data.total}</p>
          <p class="mt-4 font-semibold">Items Ordered:</p>
          <ul class="list-disc list-inside text-gray-700">${itemsHTML}</ul>
        `;

        const orderId = 'GH' + Date.now().toString(36).toUpperCase();
        const orderDate = new Date().toLocaleDateString("en-IN", {
          day: "2-digit", month: "short", year: "numeric"
        });

        // const summaryOrder = {
        //   id: orderId,
        //   product: "Multiple Items",
        //   quantity: data.cart.reduce((sum, item) => sum + (item.quantity || 1), 0),
        //   price: parseInt(data.total.replace("â‚¹", "").trim()),
        //   date: orderDate,
        //   status: "Processing"
        // };

        const productList = data.cart.map(item => `${item.name} Ã— ${item.quantity}`).join(", ");

const summaryOrder = {
  id: orderId,
  product: productList,
  quantity: data.cart.reduce((sum, item) => sum + (item.quantity || 1), 0),
  price: parseInt(data.total.replace("â‚¹", "").trim()),
  date: orderDate,
  status: "Processing"
};


        const existingOrders = JSON.parse(localStorage.getItem("orders")) || [];
        const updatedOrders = [...existingOrders, summaryOrder];
        localStorage.setItem("orders", JSON.stringify(updatedOrders));

        data.orderId = orderId;
        localStorage.setItem("orderSummary", JSON.stringify(data));

        localStorage.removeItem("cart");
      }
    });
  </script>
</body>
</html>
