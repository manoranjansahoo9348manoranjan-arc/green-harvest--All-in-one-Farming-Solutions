<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Farm Machinery - Green Harvest</title>
  <link rel="icon" type="image" href="logo1.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Google Translate -->
  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement(
        { pageLanguage: "en", includedLanguages: "en,hi,ta,te,kn,ml,mr,gu,bn,pa,ur,as,or,sd,ks,ne,si",
          layout: google.translate.TranslateElement.InlineLayout.SIMPLE },
        "google_translate_element"
      );
    }
  </script>
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

  <!-- Tailwind + FontAwesome -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>

  <style>
    .product-img { width: 220px; height: 220px; object-fit: contain; }
    .wishlist-icon { position: absolute; top: 10px; right: 10px; font-size: 20px; cursor: pointer; }
    .wishlist-icon.active { color: red; }
    .goog-te-banner-frame.skiptranslate,.goog-logo-link,.goog-te-gadget span{display:none!important;}
    body{top:0!important;}
    #google_translate_element select{padding:4px;border:1px solid #ccc;border-radius:6px;}
  </style>
</head>

<body class="bg-white text-gray-800 transition-colors duration-300">
  <!-- Header -->
  <header class="p-4 shadow-md flex justify-between items-center">
    <h1 class="text-2xl font-bold text-green-700">üå± Green Harvest</h1>
    <div class="flex items-center space-x-4">
      <div id="google_translate_element"></div>
      <a href="service.html" class="text-sm text-blue-600 hover:underline">Go to Home</a>
      <a href="wishlist.html" class="text-sm text-pink-600 hover:underline">‚ù§Ô∏è Wishlist</a>

      <!-- My Booking Icon -->
      <a href="mybooking.html" class="relative text-green-800 hover:text-green-600">
        <i class="fas fa-calendar-check text-xl"></i>
        <span id="bookedCount" class="absolute -top-2 -right-3 bg-red-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span>
      </a>
    </div>
  </header>

  <!-- Filters -->
  <div class="p-4 flex flex-wrap justify-center gap-4">
    <input id="searchInput" type="text" placeholder="Search Farm Machinery..." class="border p-2 rounded w-64" />
    <select id="sortPrice" class="border p-2 rounded">
      <option value="">Sort by Price</option>
      <option value="asc">Price: Low to High</option>
      <option value="desc">Price: High to Low</option>
    </select>
    <select id="brandFilter" class="border p-2 rounded">
      <option value="">Filter by Brand</option>
      <option value="Mahindra">Mahindra</option>
      <option value="Kubota">Kubota</option>
      <option value="Honda">Honda</option>
      <option value="VST Shakti">VST Shakti</option>
    </select>
    <div>
      <label class="text-sm">Max Price ‚Çπ</label>
      <input id="maxPrice" type="number" value="1000000" class="border p-2 rounded w-32" />
    </div>
  </div>

  <!-- Product List -->
  <main class="p-6">
    <h2 class="text-2xl font-semibold text-center text-green-800 mb-6">Top Machinery for Rental</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
  </main>

  <!-- JS -->
  <script>
    const growthPromoters = [
      { name: "Power Tiller ‚Äì VST Shakti 130 DI", desc: "13 HP diesel power tiller",  rent: 500, brand: "VST Shakti", rating: 4, img: "https://5.imimg.com/data5/OE/HK/MY-59637264/vst-shakti-130-di-power-tiller-1000x1000.jpg" },
      { name: "Tractor ‚Äì Mahindra 575 DI XP Plus", desc: "47 HP 2WD tractor", rent: 1200, brand: "Mahindra", rating: 5, img: "https://tractorkarvan.com/storage/images/Mahindra/Multiple/575-DI-XP-Plus.jpg" },
      { name: "Mini Tractor ‚Äì Kubota Neostar A211N", desc: "21 HP compact tractor",  rent: 900, brand: "Kubota", rating: 4, img: "https://th.bing.com/th/id/R.c06a98655b2709ee155a9e68d372f16c?rik=f2NQy0zvvXsPLA&riu=http%3a%2f%2fwww.targetwire.com%2fkubota%2fB1820RGB.jpg&ehk=ay3%2bX7VPWKhDQqImvmo%2bC%2bXBjpfVruNAB0LDLBSzwG0%3d&risl=&pid=ImgRaw&r=0" },
      { name: "Brush Cutter ‚Äì Honda UMK450T", desc: "4-stroke brush cutter - 2 HP", rent: 100, brand: "Honda", rating: 3, img: "https://5.imimg.com/data5/SELLER/Default/2024/6/425614438/NX/RQ/UL/111899054/honda-brush-cutter-umk450t-u2nt-500x500.png" },
      {
    name: "Rotavator ‚Äì Shaktiman Regular 6 Feet",
    desc: "6 feet rotavator for soil preparation",
    rent: 1500,
    brand: "Shaktiman",
    rating: 4,
    img: "https://novo3ds.in/wp-content/uploads/2023/06/AG214_Sakthiman_rotavator_1.jpg"
  },
  {
    name: "Seed Drill ‚Äì Khedut Manual Seeder",
    desc: "Manual seed cum fertilizer drill - 6 rows",
    rent: 200,
    brand: "Khedut",
    rating: 3,
    img: "https://shop.vgtindia.in/wp-content/uploads/2022/05/1618655236646DPMAE200239.jpg"
  },
  {
    name: "Sprayer ‚Äì Aspee Marut 12L",
    desc: "Battery operated sprayer ‚Äì 12L tank",
    rent: 150,
    brand: "Aspee",
    rating: 3,
    img: "https://5.imimg.com/data5/SELLER/Default/2025/2/489241132/HM/OT/GS/225719627/aspee-marut-hand-compression-sprayer-500x500.jpg"
  },
  {
    name: "Threshing Machine ‚Äì Mild Steel Paddy Thresher",
    desc: "Semi-automatic paddy thresher",
    rent: 1500,
    brand: "Generic",
    rating: 4,
    img: "https://tiimg.tistatic.com/fp/1/007/533/yellow-and-green-mild-steel-body-paddy-thresher-with-15-hp-for-tractor-uses-913.jpg"
  },
  {
    name: "Chaff Cutter ‚Äì Manual Hand Operated",
    desc: "Chaff cutter for fodder cutting",
    rent: 300,
    brand: "Generic",
    rating: 3,
    img: "https://5.imimg.com/data5/SELLER/Default/2021/7/GD/ZE/RT/42919278/manual-operated-chaff-cutter-machine-500x500.png"
  },
  {
    name: "Milking Machine ‚Äì Portable Single Bucket",
    desc: "Electric milking machine for 1 cow",
    rent: 500,
    brand: "V-Tech",
    rating: 4,
    img: "https://tiimg.tistatic.com/fp/1/008/335/3-horsepower-220-volts-single-bucket-portable-milking-machine-324.jpg"
  },
  {
    name: "Sugarcane Cutter ‚Äì Electric",
    desc: "Electric sugarcane cutting machine",
    rent: 2000,
    brand: "Generic",
    rating: 3,
    img: "https://5.imimg.com/data5/TN/RM/MY-25686535/sugarcane-harvester-1000x1000.jpg"
  },
  {
    name: "Water Pump ‚Äì Honda 3HP",
    desc: "Diesel engine water pump for irrigation",
    rent: 400,
    brand: "Honda",
    rating: 4,
    img: "https://powerequipment.honda.com/-/media/Images/pages/pumps/additional-resources-shopping-pumps.jpg"
  },
  {
    name: "Paddy Transplanter Automatic",
    desc: "Automatic 4-row paddy transplanter",
    rent: 2000,
    brand: "Shaktiman",
    rating: 4,
    img: "https://i.ytimg.com/vi/lmRbq_SV4C4/maxresdefault.jpg"
  },
  {
    name: "Fertilizer Spreader ‚Äì Manual 50kg",
    desc: "Hand operated fertilizer spreader",
    rent: 150,
    brand: "Khedut",
    rating: 3,
    img: "https://m.media-amazon.com/images/I/71jN2AZdEYL._AC_SL1500_.jpg"
  },
    ];

    // Wishlist
    function getWishlist() { return JSON.parse(localStorage.getItem("wishlist")) || []; }
    function saveWishlist(list) { localStorage.setItem("wishlist", JSON.stringify(list)); }
    function toggleWishlist(product) {
      let wishlist = getWishlist();
      const exists = wishlist.find(p => p.name === product.name);
      if (exists) { wishlist = wishlist.filter(p => p.name !== product.name); }
      else { wishlist.push(product); }
      saveWishlist(wishlist);
      renderProducts(document.currentProducts);
    }
    function isInWishlist(name) { return getWishlist().some(p => p.name === name); }

    // Update booked count
    function updateBookedCount() {
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
      document.getElementById("bookedCount").textContent = cart.length;
    }

    function renderStars(rating) { return "‚òÖ".repeat(rating) + "‚òÜ".repeat(5 - rating); }

    function renderProducts(products) {
      const container = document.querySelector(".grid");
      container.innerHTML = "";
      document.currentProducts = products;

      products.forEach((product, index) => {
        const card = document.createElement("div");
        card.className = "relative flex flex-col items-center border rounded-lg p-4 shadow-sm hover:shadow-lg transition bg-white";
        card.innerHTML = `
          <i class="fas fa-heart wishlist-icon ${isInWishlist(product.name) ? "active" : ""}" data-index="${index}"></i>
          <img src="${product.img}" alt="${product.name}" class="product-img rounded-lg shadow-md">
          <h3 class="mt-4 text-lg font-medium">${product.name}</h3>
          <p class="text-sm text-gray-600 mt-1">${product.desc}</p>
          <p class="text-xs italic">Brand: ${product.brand}</p>
          <p class="text-yellow-500 text-sm">${renderStars(product.rating)}</p>

          <div id="rent-section-${index}" class="mt-2">
            <label class="text-sm">Duration (hours)</label>
            <input id="hours-${index}" type="number" min="1" max="24" value="1" class="mt-1 border rounded w-16 text-center">
            <p class="mt-2">Rent: ‚Çπ${product.rent} √ó Hours = ‚Çπ<span class="rent-total">${product.rent}</span></p>
          </div>

          <button class="add-to-cart-btn mt-3 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700" data-index="${index}">Book Rental</button>
        `;
        container.appendChild(card);

        // Wishlist toggle
        card.querySelector(".wishlist-icon").addEventListener("click", () => toggleWishlist(product));

        // Hours input update
        card.querySelector(`#hours-${index}`).addEventListener("input", e => {
          card.querySelector(".rent-total").textContent = (parseInt(e.target.value) || 1) * product.rent;
        });
      });

      // Add to Booking -> open form
document.querySelectorAll(".add-to-cart-btn").forEach(btn => {
  btn.addEventListener("click", e => {
    const i = e.target.getAttribute("data-index");
    const hrs = parseInt(document.getElementById(`hours-${i}`).value);
    const product = { ...growthPromoters[i], hours: hrs, total: hrs * growthPromoters[i].rent };

    // Save selected product temporarily
    localStorage.setItem("selectedRental", JSON.stringify(product));

    // Redirect to booking form page
    window.location.href = "rental-form.html";
  });
});

    }

    function applyFilters() {
      const search = document.getElementById("searchInput").value.toLowerCase();
      const sortOption = document.getElementById("sortPrice").value;
      const brand = document.getElementById("brandFilter").value;
      const maxPrice = parseInt(document.getElementById("maxPrice").value);

      let filtered = growthPromoters.filter(p =>
        (p.name.toLowerCase().includes(search) || p.brand.toLowerCase().includes(search)) &&
        (!brand || p.brand === brand) &&
        p.price <= maxPrice
      );
      if (sortOption === "asc") filtered.sort((a,b)=>a.price-b.price);
      if (sortOption === "desc") filtered.sort((a,b)=>b.price-a.price);
      renderProducts(filtered);
    }

    document.addEventListener("DOMContentLoaded", () => {
      renderProducts(growthPromoters);
      updateBookedCount();
      document.getElementById("searchInput").addEventListener("input", applyFilters);
      document.getElementById("sortPrice").addEventListener("change", applyFilters);
      document.getElementById("brandFilter").addEventListener("change", applyFilters);
      document.getElementById("maxPrice").addEventListener("input", applyFilters);
    });
  </script>

  <!-- Footer -->
  <footer class="text-center text-sm text-gray-500 mt-12 p-4 border-t">
    &copy; 2025 Green Harvest. All rights reserved.
  </footer>
</body>
</html>
